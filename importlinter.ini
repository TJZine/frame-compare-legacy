[importlinter]
root_package = src
include_external_packages = True
# NOTE: The Click shim ``frame_compare.py`` lives at the repository root (module file, not a package),
# so it cannot be listed as a root package for import-linter. CLI back-imports are enforced via the
# forbidden contract below instead.

[importlinter:contract:cli_runner_modules_layering]
name = Runner→Core→Modules layering
type = layers
layers =
    src.frame_compare.runner
    src.frame_compare.orchestration
    src.frame_compare.core
    src.frame_compare.alignment : src.frame_compare.alignment_helpers : src.frame_compare.alignment_preview : src.frame_compare.analysis : src.frame_compare.analyze_target : src.frame_compare.cache : src.frame_compare.cli_runtime : src.frame_compare.config_helpers : src.frame_compare.config_template : src.frame_compare.config_writer : src.frame_compare.diagnostics : src.frame_compare.doctor : src.frame_compare.interfaces : src.frame_compare.layout : src.frame_compare.layout_utils : src.frame_compare.media : src.frame_compare.metadata : src.frame_compare.net : src.frame_compare.planner : src.frame_compare.preflight : src.frame_compare.presets : src.frame_compare.render : src.frame_compare.report : src.frame_compare.result_snapshot : src.frame_compare.runtime_utils : src.frame_compare.screenshot : src.frame_compare.selection : src.frame_compare.slowpics : src.frame_compare.subproc : src.frame_compare.tmdb_workflow : src.frame_compare.vspreview : src.frame_compare.wizard : src.frame_compare.vs : src.frame_compare.vs.env : src.frame_compare.vs.source : src.frame_compare.vs.props : src.frame_compare.vs.color : src.frame_compare.vs.tonemap
# Note: src.frame_compare.services is intentionally excluded from layers - it's a cross-cutting
# concern that provides facades for orchestration AND utilities consumed by leaf modules (e.g., dovi_tool).

[importlinter:contract:forbid_cli_backimports]
name = Forbid module→CLI imports
type = forbidden
source_modules =
    src.frame_compare.alignment
    src.frame_compare.alignment_helpers
    src.frame_compare.alignment_preview
    src.frame_compare.cache
    src.frame_compare.cli_runtime
    src.frame_compare.config_helpers
    src.frame_compare.config_writer
    src.frame_compare.doctor
    src.frame_compare.layout_utils
    src.frame_compare.media
    src.frame_compare.metadata

    src.frame_compare.planner
    src.frame_compare.preflight
    src.frame_compare.presets

    src.frame_compare.runtime_utils
    src.frame_compare.selection
    src.frame_compare.vspreview
    src.frame_compare.wizard
    src.frame_compare.render
    src.frame_compare.analysis
    src.frame_compare.vs
forbidden_modules =
    frame_compare
as_packages = False

[importlinter:contract:forbid_core_backimports]
name = Forbid module→core imports
type = forbidden
source_modules =
    src.frame_compare.alignment
    src.frame_compare.alignment_helpers
    src.frame_compare.alignment_preview
    src.frame_compare.cache
    src.frame_compare.cli_runtime
    src.frame_compare.config_helpers
    src.frame_compare.config_writer
    src.frame_compare.doctor
    src.frame_compare.layout_utils
    src.frame_compare.media
    src.frame_compare.metadata

    src.frame_compare.planner
    src.frame_compare.preflight
    src.frame_compare.presets

    src.frame_compare.runtime_utils
    src.frame_compare.selection
    src.frame_compare.vspreview
    src.frame_compare.wizard
    src.frame_compare.render
    src.frame_compare.analysis
    src.frame_compare.vs
forbidden_modules =
    src.frame_compare.core

as_packages = False
